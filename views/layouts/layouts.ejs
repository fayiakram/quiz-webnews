<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berita Terkini</title>
    <meta name="description"
        content="Ini adalah contoh meta description untuk halaman web. Meta description memberikan deskripsi singkat tentang konten halaman web ini." />
    <!-- Tambahkan referensi Bootstrap CSS di sini -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
    <!-- Inisiasi content web -->
    <%- body %>

        <!-- script fot call library tinyMCE -->
        <script src="/tinymce/tinymce.min.js"></script>
        <script src="/js/index.js"></script>


        <!-- Tambahkan referensi Bootstrap JS di sini -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <script>// default function create submit form
            $("#create-news-form").submit(function (event) {
                event.preventDefault(); //menghentikan pengiriman formulir secara default

                // mengambil data dari formulir
                let title = $("#title").val();
                let cover = $("#cover").val();
                let content = $("#content").val();

                // mengirim data ke API menggunakan AJAX
                $.ajax({
                    url: "/api/v1/news",
                    type: "POST",
                    contentType: "application/json",
                    data: JSON.stringify({ title: title, cover: cover, content: content, isPublic: true, author: "Admin" }),
                    success: function (response) {
                        // tindakan setelah berhasil
                        alert("berita berhasil ditambah.");
                        // redirect ke halaman llain atau lakukan sesuatu yang sesuai kebutuhan anda
                        window.location.href = "/";

                    },
                    error: function (error) {
                        // tindakan jika terjadi kesalahan
                        console.error("terjadi kesalahan: " + JSON.stringify(error));
                        alert("gagal menyimpan berita.")
                    },
                });

            });</script>

</body>

</html>